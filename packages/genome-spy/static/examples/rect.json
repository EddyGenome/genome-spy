{
  "data": {
    "values": [
      { "x": 0.2, "x2": 0.4, "z": "a" },
      { "x": 0.6, "x2": 0.8, "z": "a" },
      { "x": 0, "x2": 0.2, "z": "b" }
    ]
  },

  "layer": [
    {
      "mark": {
        "type": "rect",
        "minWidth": 200,
        "minHeight": 200
      },

      "encoding": {
        "x": {
          "field": "x",
          "type": "quantitative",
          "scale": { "domain": [0, 1] },
          "axis": null
        },
        "x2": { "field": "x2" },
        "y": {
          "field": "x",
          "type": "quantitative",
          "scale": { "domain": [0, 1] },
          "axis": null
        },
        "squeeze": {
          "field": "z",
          "type": "nominal"
        },
        "y2": { "field": "x2" }
      }
    },
    {
      "transform": [
        { "type": "gather", "columnRegex": ["^(x.?)$"], "asValue": ["z"] }
      ],

      "layer": [
        {
          "mark": "rule",

          "encoding": {
            "x": { "field": "z", "type": "quantitative", "axis": null },
            "color": { "value": "darkgray" }
          }
        },
        {
          "mark": "rule",

          "encoding": {
            "y": { "field": "z", "type": "quantitative", "axis": null },
            "color": { "value": "darkgray" }
          }
        }
      ]
    }
  ]
}
